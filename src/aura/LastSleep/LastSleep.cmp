<!--
 - Created by gmt on 2019-06-14.
 -->

<aura:component description="LastSleep"
                implements="force:appHostable,flexipage:availableForAllPageTypes"
                controller="ApexHelperController">
    <aura:attribute name="record" type="Baby_Activity__c"/>
    <aura:attribute name="currentRecord" type="Baby_Activity__c"/>
    <aura:attribute name="currentlySleeping" type="Boolean"/>
    <aura:attribute name="pageReference" type="Object"/>
    <aura:handler name="init" value="{!this}" action="{!c.init}"/>

    <aura:if isTrue="{!v.record}">
        <lightning:card >
            <aura:set attribute="title">
                <c:CardTitle icon="{!v.record.Icon__c}" pageReference="{!v.pageReference}" >
                    <aura:set attribute="title">
                        <aura:if isTrue="{!v.currentRecord}">
                            Sleeping Since: <span class="titleText red"> <strong> <lightning:formattedDateTime value="{!v.currentRecord.Date_Time__c}"
                                                                                                                 hour="2-digit" minute="2-digit"
                                                                                                                 timeZone="America/New_York"/> </strong>  ...</span>
                        </aura:if>
                        <aura:if isTrue="{!v.currentlySleeping == false}">
                            Last Sleep:
                            <span class="titleText">
                            <lightning:formattedDateTime value="{!v.record.Date_Time__c}"
                                                         year="numeric" day="2-digit" month="long"
                                                         timeZone="America/New_York"/>
                        </span>
                        </aura:if>
                    </aura:set>
                </c:CardTitle>
            </aura:set>
            <aura:set attribute="footer">
                <lightning:badge label="{!'Total: ' + v.record.Amount__c}"/>
            </aura:set>

            <div class="slds-card__body slds-card__body_inner">
                <lightning:tile label="{!v.record.Name}" class="slds-tile_board">

                    <div class="slds-text-align--center" style="margin-top: -1rem;">
                        <aura:if isTrue="{!v.currentlySleeping}">
                            <p style="margin:10px 0 0 0;" class="slds-text-heading_medium">Last Sleep</p>
                        </aura:if>
                        <div class="slds-text-color_success" style="font-size:2rem; font-weight: bold;">
                            {!v.record.Hours_Slept__c}
                        </div>
                        <p class="slds-text-heading--medium slds-text-title_caps slds-m-bottom_medium"> hours
                        </p>
                        <p class="slds-text-body_regular">
                            <lightning:formattedDateTime value="{!v.record.Date_Time__c}"
                                                         hour="2-digit" minute="2-digit"
                                                         timeZone="America/New_York"/>
                            -
                            <lightning:formattedDateTime value="{!v.record.Sleep_End_Datetime__c}"
                                                         hour="2-digit" minute="2-digit"
                                                         timeZoneName="short"
                                                         timeZone="America/New_York"/>
                        </p>
                    </div>
                </lightning:tile>
            </div>
        </lightning:card>
    </aura:if>
</aura:component>